(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[478],{8698:function(e,t,n){Promise.resolve().then(n.bind(n,5056)),Promise.resolve().then(n.t.bind(n,2972,23)),Promise.resolve().then(n.bind(n,1523)),Promise.resolve().then(n.bind(n,49))},5056:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var r=n(2265),i=n(8822),o=n(2755),c=n(4033);function a(e){let{orderId:t}=e;return(0,r.useEffect)(()=>{if(!t)return;let e="greencart_purchase_tracked_".concat(t);if(window.sessionStorage.getItem(e))return;let n=(0,i.Z6)();n&&(0,o.G7)(n.accessToken,t).then(t=>{(0,c.trackPurchase)({orderId:t.id,currency:t.currency,totalCents:t.totalAmountCents}),window.sessionStorage.setItem(e,"1")}).catch(()=>{})},[t]),null}},8439:function(e,t,n){"use strict";n.d(t,{CB:function(){return i},Hp:function(){return c},as:function(){return a},dU:function(){return o}});let r="greencart_consent_analytics",i="greencart:consent-changed";function o(){let e=window.localStorage.getItem(r);return"granted"===e||"denied"===e?e:null}function c(){return"granted"===o()}function a(e){window.localStorage.setItem(r,e),window.dispatchEvent(new Event(i))}},4033:function(e,t,n){"use strict";n.d(t,{Kc:function(){return u},Sg:function(){return a},Z_:function(){return l},trackPurchase:function(){return s}});var r=n(8439);let i=new URL("/api/v1/analytics/events",(0,n(9116).r)()).toString();function o(e){return"number"!=typeof e||Number.isNaN(e)?null:e/100}function c(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if((0,r.Hp)())window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:t,greencartEvent:e,timestamp:new Date().toISOString(),...n,...o}),function(e,t,n){let r=JSON.stringify({event_name:e,source:"web_app",properties:{...n,gtm_event:t}});try{if("undefined"!=typeof navigator&&"function"==typeof navigator.sendBeacon){let e=new Blob([r],{type:"application/json"});if(navigator.sendBeacon(i,e))return}}catch(e){}fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:r,keepalive:!0}).catch(()=>{})}(e,t,n)}function a(e){var t,n,r;let i=null!==(t=e.priceCents)&&void 0!==t?t:null,a={product_id:e.id,name:e.name,price_cents:i,category:null!==(n=e.category)&&void 0!==n?n:null,region:null!==(r=e.region)&&void 0!==r?r:null},u=o(i),l=[{item_id:e.id,item_name:e.name,...e.category?{item_category:e.category}:{},...e.region?{item_category2:e.region}:{},...null!==u?{price:u}:{}}];c("view_product","view_item",a,{ecommerce:{currency:"EUR",...null!==u?{value:u}:{},items:l}})}function u(e){var t,n;let r={product_id:e.id,name:e.name,quantity:e.quantity,price_cents:null!==(t=e.priceCents)&&void 0!==t?t:null},i=o(null!==(n=e.priceCents)&&void 0!==n?n:null),a=null!==i?i*e.quantity:null;c("add_to_cart","add_to_cart",r,{ecommerce:{currency:"EUR",...null!==a?{value:a}:{},items:[{item_id:e.id,item_name:e.name,quantity:e.quantity,...null!==i?{price:i}:{}}]}})}function l(e){let t={total_cents:e.totalCents,item_count:e.items.reduce((e,t)=>e+t.quantity,0),items:e.items},n=o(e.totalCents);c("begin_checkout","begin_checkout",t,{ecommerce:{currency:"EUR",...null!==n?{value:n}:{},items:e.items.map(e=>{var t;let n=o(null!==(t=e.priceCents)&&void 0!==t?t:null),r={item_id:e.id,item_name:String(e.id),quantity:e.quantity};return null!==n&&(r.price=n),r})}})}function s(e){var t;let n={order_id:e.orderId,currency:e.currency,value_cents:e.totalCents},r=o(e.totalCents);c("purchase","purchase",n,{ecommerce:{currency:null!==(t=e.currency)&&void 0!==t?t:"EUR",transaction_id:e.orderId,...null!==r?{value:r}:{}}})}},9116:function(e,t,n){"use strict";n.d(t,{S:function(){return i},r:function(){return c}});let r="http://localhost:8000".replace(/\/+$/,"");async function i(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{params:i,authToken:c,headers:a,next:u,cache:l,...s}=n,d=function(e,t){let n=new URL("".concat("/api/v1").concat(e),r);return t&&Object.entries(t).filter(e=>{let[,t]=e;return null!=t&&""!==t}).forEach(e=>{let[t,r]=e;return n.searchParams.set(t,String(r))}),n}(e,i),f=(null!==(t=s.method)&&void 0!==t?t:"GET").toString().toUpperCase(),m="GET"===f,p=null!=u?u:!c&&m?{revalidate:300}:void 0,_=await fetch(d,{...s,method:f,headers:{"Content-Type":"application/json",...c?{Authorization:"Bearer ".concat(c)}:{},...null!=a?a:{}},cache:null!=l?l:c||!m?"no-store":void 0,...p?{next:p}:{}});if(!_.ok){let e=await o(_),t=Error("API request failed with ".concat(_.status," ").concat(_.statusText));throw t.status=_.status,t.payload=e,t}return await o(_)}async function o(e){let t=await e.text();if(!t)return null;try{return JSON.parse(t)}catch(e){return t}}function c(){return r}},8822:function(e,t,n){"use strict";n.d(t,{XC:function(){return o},Z6:function(){return c},ZP:function(){return a}});let r="greencart_access_token",i="greencart_refresh_token";function o(e){window.localStorage.setItem(r,e.accessToken),window.localStorage.setItem(i,e.refreshToken)}function c(){let e=window.localStorage.getItem(r),t=window.localStorage.getItem(i);return e&&t?{accessToken:e,refreshToken:t}:null}function a(){window.localStorage.removeItem(r),window.localStorage.removeItem(i)}},2755:function(e,t,n){"use strict";n.d(t,{AU:function(){return o},G7:function(){return c},LV:function(){return i}});var r=n(9116);async function i(e,t,n){return a(await (0,r.S)("/orders",{method:"POST",authToken:e,body:JSON.stringify(t),headers:{"Idempotency-Key":n}}))}async function o(e){var t,n;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=await (0,r.S)("/orders",{authToken:e,params:{limit:null!==(t=i.limit)&&void 0!==t?t:20,offset:null!==(n=i.offset)&&void 0!==n?n:0}});return{items:o.items.map(a),total:o.total,limit:o.limit,offset:o.offset}}async function c(e,t){return a(await (0,r.S)("/orders/".concat(t),{authToken:e}))}function a(e){return{id:e.id,status:e.status,currency:e.currency,totalAmountCents:e.total_amount_cents,totalItems:e.total_items,totalImpactCo2Grams:e.total_impact_co2_g,paymentReference:e.payment_reference,paymentProvider:e.payment_provider,idempotencyKey:e.idempotency_key,placedAt:e.placed_at,notes:e.notes,createdAt:e.created_at,updatedAt:e.updated_at,lines:e.lines.map(u)}}function u(e){var t;return{id:e.id,productId:e.product_id,productTitle:e.product_title,quantity:e.quantity,unitPriceCents:e.unit_price_cents,referencePriceCents:null!==(t=e.reference_price_cents)&&void 0!==t?t:null,subtotalCents:e.subtotal_cents,impactCo2Grams:e.impact_co2_g,createdAt:e.created_at,updatedAt:e.updated_at}}},1523:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return i}});let r=n(8993);function i(e){let{reason:t,children:n}=e;if("undefined"==typeof window)throw new r.BailoutToCSRError(t);return n}},49:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadCss",{enumerable:!0,get:function(){return o}});let r=n(7437),i=n(544);function o(e){let{moduleIds:t}=e;if("undefined"!=typeof window)return null;let n=(0,i.getExpectedRequestStore)("next/dynamic css"),o=[];if(n.reactLoadableManifest&&t){let e=n.reactLoadableManifest;for(let n of t){if(!e[n])continue;let t=e[n].files.filter(e=>e.endsWith(".css"));o.push(...t)}}return 0===o.length?null:(0,r.jsx)(r.Fragment,{children:o.map(e=>(0,r.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:n.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}}},function(e){e.O(0,[972,971,117,744],function(){return e(e.s=8698)}),_N_E=e.O()}]);