(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[285],{1369:function(e,s,a){Promise.resolve().then(a.bind(a,5849))},5849:function(e,s,a){"use strict";a.d(s,{default:function(){return o}});var l=a(7437),t=a(7648),i=a(2265),n=a(4730),r=a(1741);function c(e){return"".concat(e.toFixed(2)," EUR")}function d(e){var s;let{experience:a}=e,{user:r}=(0,n.a)(),d=a.openAuthModal;(0,i.useEffect)(()=>{r||d("login")},[r,d]);let o=0===a.cartItems.length,p=a.isCartSyncing||o;return(0,l.jsxs)("main",{className:"container",style:{display:"grid",gap:"var(--space-12)"},children:[(0,l.jsxs)("nav",{"aria-label":"Fil d'ariane",style:{fontSize:"var(--fs-small)"},children:[(0,l.jsx)(t.default,{className:"muted",href:"/catalogue",children:"Catalogue"})," / Checkout"]}),(0,l.jsx)("section",{className:"section",children:(0,l.jsxs)("div",{style:{display:"grid",gap:"var(--space-3)"},children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"badge badge--impact",children:"Etape finale"}),(0,l.jsx)("h1",{style:{marginTop:"var(--space-2)"},children:"Confirmation de commande"}),(0,l.jsx)("p",{className:"muted",children:"Verifiez votre panier, renseignez les informations de livraison (simule) et validez."})]}),a.checkoutSuccess?(0,l.jsx)("div",{className:"alert alert--success",role:"status",children:a.checkoutSuccess}):null,a.cartError?(0,l.jsx)("div",{className:"alert alert--warning",role:"status",children:a.cartError}):null,(0,l.jsxs)("div",{className:"card",style:{gap:"var(--space-3)"},children:[(0,l.jsx)("strong",{children:"Recapitulatif panier"}),o?(0,l.jsx)("p",{className:"muted",children:"Votre panier est vide."}):(0,l.jsx)("div",{className:"grid",style:{gap:"var(--space-2)"},children:a.cartItems.map(e=>(0,l.jsxs)("div",{className:"grid",style:{gap:"4px"},children:[(0,l.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",gap:"var(--space-2)"},children:[(0,l.jsx)("span",{children:e.name}),(0,l.jsx)("span",{children:c(e.price*e.quantity)})]}),(0,l.jsxs)("div",{className:"muted",style:{fontSize:"var(--fs-small)"},children:["Quantite ",e.quantity," - Impact evite ",(e.co2Saved*e.quantity).toFixed(1)," kg CO2e"]})]},e.id))}),(0,l.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",fontWeight:600},children:[(0,l.jsx)("span",{children:"Total"}),(0,l.jsx)("span",{children:c(a.cartTotals.totalPrice)})]})]}),(0,l.jsxs)("div",{className:"card",style:{gap:"var(--space-3)"},children:[(0,l.jsx)("strong",{children:"Coordonnees (demo)"}),(0,l.jsxs)("div",{className:"grid",style:{gap:"var(--space-2)"},children:[(0,l.jsx)("input",{className:"input",placeholder:"Nom complet",defaultValue:null!==(s=null==r?void 0:r.firstName)&&void 0!==s?s:""}),(0,l.jsx)("input",{className:"input",placeholder:"Adresse de livraison"}),(0,l.jsxs)("div",{style:{display:"flex",gap:"var(--space-2)",flexWrap:"wrap"},children:[(0,l.jsx)("input",{className:"input",placeholder:"Code postal",style:{flex:"1 1 140px"}}),(0,l.jsx)("input",{className:"input",placeholder:"Ville",style:{flex:"2 1 220px"}})]}),(0,l.jsx)("textarea",{className:"textarea",placeholder:"Instructions (optionnel)",rows:3})]})]}),(0,l.jsxs)("div",{style:{display:"flex",gap:"var(--space-2)",flexWrap:"wrap"},children:[(0,l.jsx)("button",{className:"btn btn--primary",type:"button",disabled:p,onClick:a.handleCheckout,children:a.isCartSyncing?"Validation en cours...":"Confirmer la commande"}),(0,l.jsx)(t.default,{className:"btn btn--ghost",href:"/catalogue",children:"Continuer vos achats"})]})]})})]})}function o(){return(0,l.jsx)(r.Z,{children:e=>(0,l.jsx)(d,{experience:e})})}}},function(e){e.O(0,[972,697,741,971,117,744],function(){return e(e.s=1369)}),_N_E=e.O()}]);