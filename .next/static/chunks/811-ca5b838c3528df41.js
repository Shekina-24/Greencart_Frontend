(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[811],{7811:function(e,a,s){Promise.resolve().then(s.bind(s,7888))},7888:function(e,a,s){"use strict";s.d(a,{default:function(){return r}});var l=s(7437),t=s(5761),i=s(1741);function n(e){let{experience:a,title:s,description:i,heroAside:n}=e;return(0,l.jsx)("main",{className:"container",style:{display:"grid",gap:"var(--space-12)"},children:(0,l.jsx)(t.Z,{filters:a.filters,categories:a.categories,regions:a.regions,products:a.filteredProducts,totalProducts:a.totalProducts,page:a.page,pageSize:a.pageSize,isLoading:a.isLoadingProducts,onFiltersChange:a.setFilters,onPageChange:a.setPage,onAddToCart:a.addToCart,onOpenDetails:a.openProduct})})}function r(e){return(0,l.jsx)(i.Z,{initialFilters:e.initialFilters,children:a=>(0,l.jsx)(n,{...e,experience:a})})}},5761:function(e,a,s){"use strict";s.d(a,{Z:function(){return r}});var l=s(7437),t=s(3030);let i=[{value:"newest",label:"Nouveautes"},{value:"price_asc",label:"Prix croissant"},{value:"price_desc",label:"Prix decroissant"},{value:"dlc_asc",label:"DLC la plus proche"}],n={category:"",region:"",availability:"",query:"",priceMin:null,priceMax:null,dlcMaxDays:null,sort:"newest"};function r(e){var a,s,r;let{filters:c,categories:o,regions:d,products:u,totalProducts:p,page:m,pageSize:h,isLoading:x,onFiltersChange:g,onPageChange:b,onAddToCart:v,onOpenDetails:j}=e,N=Math.max(1,Math.ceil(p/h)),f=(e,a)=>{g({...c,[e]:a})},y=(e,a)=>{let s=""===a?null:Number(a);g({...c,[e]:Number.isFinite(s)?s:null})};return(0,l.jsxs)("section",{id:"catalogue",className:"section",children:[(0,l.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"var(--space-3)"},children:[(0,l.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"var(--space-2)"},children:[(0,l.jsx)("h2",{children:"Catalogue national"}),(0,l.jsx)("p",{className:"muted",children:"Filtrez par categorie, region, prix ou DLC pour composer un panier responsable."})]}),(0,l.jsxs)("div",{className:"filters","aria-label":"Filtres catalogue",style:{rowGap:"var(--space-2)"},children:[(0,l.jsxs)("select",{className:"select","aria-label":"Categorie",value:c.category,onChange:e=>f("category",e.target.value),children:[(0,l.jsx)("option",{value:"",children:"Categorie - toutes"}),o.map(e=>(0,l.jsx)("option",{value:e,children:e},e))]}),(0,l.jsxs)("select",{className:"select","aria-label":"Region",value:c.region,onChange:e=>f("region",e.target.value),children:[(0,l.jsx)("option",{value:"",children:"Region - toutes"}),d.map(e=>(0,l.jsx)("option",{value:e,children:e},e))]}),(0,l.jsxs)("select",{className:"select","aria-label":"Disponibilite",value:c.availability,onChange:e=>f("availability",e.target.value),children:[(0,l.jsx)("option",{value:"",children:"Disponibilite"}),(0,l.jsx)("option",{value:"surplus",children:"Surplus"}),(0,l.jsx)("option",{value:"normal",children:"Standard"})]}),(0,l.jsx)("input",{className:"input",placeholder:"Rechercher... (ex: pommes)",value:c.query,onChange:e=>f("query",e.target.value)}),(0,l.jsx)("input",{className:"input",type:"number",min:0,placeholder:"Prix min (EUR)",value:null!==(a=c.priceMin)&&void 0!==a?a:"",onChange:e=>y("priceMin",e.target.value)}),(0,l.jsx)("input",{className:"input",type:"number",min:0,placeholder:"Prix max (EUR)",value:null!==(s=c.priceMax)&&void 0!==s?s:"",onChange:e=>y("priceMax",e.target.value)}),(0,l.jsx)("input",{className:"input",type:"number",min:0,placeholder:"DLC max (jours)",value:null!==(r=c.dlcMaxDays)&&void 0!==r?r:"",onChange:e=>y("dlcMaxDays",e.target.value)}),(0,l.jsx)("select",{className:"select","aria-label":"Tri",value:c.sort,onChange:e=>f("sort",e.target.value),children:i.map(e=>(0,l.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,l.jsx)("button",{className:"btn btn--ghost",type:"button",onClick:()=>{g({...n}),b(1)},children:"Reinitialiser"})]}),(0,l.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"space-between",gap:"var(--space-2)"},children:[(0,l.jsx)("span",{className:"muted",children:x?"Chargement en cours...":"".concat(p," produit").concat(p>1?"s":"")}),(0,l.jsxs)("div",{style:{display:"inline-flex",alignItems:"center",gap:"var(--space-2)"},children:[(0,l.jsx)("button",{className:"btn btn--ghost",type:"button",onClick:()=>{m>1&&b(m-1)},disabled:m<=1||x,children:"Prec."}),(0,l.jsxs)("span",{className:"muted",children:["Page ",m," / ",N]}),(0,l.jsx)("button",{className:"btn btn--ghost",type:"button",onClick:()=>{m<N&&b(m+1)},disabled:m>=N||x,children:"Suiv."})]})]})]}),(0,l.jsx)("div",{className:"grid cards-3","aria-live":"polite",children:0===u.length?(0,l.jsx)("p",{className:"muted",style:{gridColumn:"1 / -1"},children:x?"Chargement des produits...":"Aucun produit ne correspond aux filtres selectionnes."}):u.map(e=>(0,l.jsx)(t.Z,{product:e,onAddToCart:v,onOpenDetails:j},e.id))})]})}},3030:function(e,a,s){"use strict";s.d(a,{Z:function(){return c}});var l=s(7437),t=s(7238),i=s(850),n=s(3145),r=s(7648);function c(e){var a;let{product:s,onAddToCart:c,onOpenDetails:o}=e,d="surplus"===s.availability?{label:"Lot anti-gaspi",className:"badge badge--promo"}:{label:"Producteur local",className:"badge"},u=(a=s.dlcDays)<=3?{label:"DLC ".concat(a," j"),className:"badge badge--alert",message:"DLC proche : pensez a consommer rapidement."}:a<=7?{label:"DLC ".concat(a," j"),className:"badge badge--promo",message:"A consommer cette semaine."}:{label:"DLC ".concat(a," j"),className:"badge badge--impact",message:"DLC confortable : stockez quelques jours."},p="/produits/".concat(s.slug),m="number"==typeof s.stock&&s.stock<=0;return(0,l.jsxs)("article",{className:"card product","aria-label":"Produit ".concat(s.name),children:[(0,l.jsx)(r.default,{href:p,"aria-label":"Consulter ".concat(s.name),children:(0,l.jsx)(n.default,{src:s.image,alt:s.name,width:480,height:320,sizes:"(max-width: 900px) 100vw, 320px",className:"product-image"})}),(0,l.jsxs)("div",{className:"product__heading",children:[(0,l.jsx)(r.default,{href:p,className:"product__title",children:s.name}),(0,l.jsx)("span",{className:d.className,children:d.label})]}),(0,l.jsx)("div",{className:"product__meta",children:(0,l.jsxs)("span",{children:[s.category," - ",s.region," - ",s.unit]})}),(0,l.jsxs)("div",{className:"product__pricing",children:[(0,l.jsxs)("strong",{children:[s.price.toFixed(2)," EUR"]}),(0,l.jsxs)("div",{className:"product__impact",children:[(0,l.jsx)(t.Z,{size:16,strokeWidth:1.5,"aria-hidden":!0}),(0,l.jsx)("span",{children:function(e){let a=null!=e.impactCo2Grams?e.impactCo2Grams:Math.max(0,Math.round(1e3*e.co2Saved));return a>=1e3?"".concat((a/1e3).toFixed(1)," kg CO2e evites"):"".concat(a," g CO2e evites")}(s)})]}),"number"==typeof s.stock?(0,l.jsxs)("span",{className:"muted",style:{fontSize:"var(--fs-small)"},children:["Stock: ",s.stock>0?s.stock:0]}):null]}),(0,l.jsxs)("div",{className:"product__details",children:[(0,l.jsxs)("div",{className:"product__dlc",children:[(0,l.jsxs)("div",{className:"product__dlc-label",children:[(0,l.jsx)(i.Z,{size:16,strokeWidth:1.5,"aria-hidden":!0}),(0,l.jsx)("span",{children:u.label})]}),(0,l.jsx)("span",{className:u.className,"aria-live":"polite",children:u.message})]}),(0,l.jsx)("p",{className:"product__description",children:s.description}),(0,l.jsx)(r.default,{href:p,className:"product__link",children:"Voir la fiche complete"})]}),(0,l.jsxs)("div",{className:"product__actions",children:[(0,l.jsx)("button",{className:"btn btn--primary",type:"button",onClick:()=>c(s),disabled:m,"aria-disabled":m,title:m?"Rupture de stock":"Ajouter au panier",children:m?"Rupture":"Ajouter au panier"}),(0,l.jsx)("button",{className:"btn btn--secondary",type:"button",onClick:()=>o(s),children:"Details rapides"})]})]})}}}]);