(()=>{var e={};e.id=865,e.ids=[865],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8598:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>c}),s(9410),s(7304),s(8242),s(5866);var r=s(3191),a=s(8716),i=s(7922),n=s.n(i),o=s(5231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let c=["",{children:["producteurs",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,9410)),"C:\\New\\Greencart\\Greencart\\app\\producteurs\\dashboard\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,7304)),"C:\\New\\Greencart\\Greencart\\app\\producteurs\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,8242)),"C:\\New\\Greencart\\Greencart\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\New\\Greencart\\Greencart\\app\\producteurs\\dashboard\\page.tsx"],u="/producteurs/dashboard/page",p={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/producteurs/dashboard/page",pathname:"/producteurs/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},4213:(e,t,s)=>{Promise.resolve().then(s.bind(s,9979))},5303:()=>{},9979:(e,t,s)=>{"use strict";s.d(t,{default:()=>c});var r=s(326),a=s(7577);s(3584);var i=s(8358),n=s(2531);function o(e){return`${(e/100).toFixed(2)} EUR`}function l(){let{user:e}=(0,i.a)(),[t,s]=(0,a.useState)(null),[n,l]=(0,a.useState)(!1),[c,d]=(0,a.useState)(null);return r.jsx("main",{className:"container",style:{display:"grid",gap:"var(--space-12)"},children:r.jsx("section",{className:"section",children:(0,r.jsxs)("div",{style:{display:"grid",gap:"var(--space-3)"},children:[(0,r.jsxs)("div",{children:[r.jsx("div",{className:"badge badge--impact",children:"Espace producteur"}),r.jsx("h1",{style:{marginTop:"var(--space-2)"},children:"Tableau de bord"}),r.jsx("p",{className:"muted",children:"Suivi des ventes, unit\xe9s vendues et impact."})]}),c?r.jsx("div",{className:"alert alert--warning",children:c}):null,n||!t?r.jsx("p",{className:"muted",children:"Chargement..."}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"grid",style:{gap:"var(--space-3)",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))"},children:[(0,r.jsxs)("article",{className:"card",style:{gap:"var(--space-1)"},children:[r.jsx("strong",{children:t.totalOrders}),r.jsx("span",{className:"muted",style:{fontSize:"var(--fs-small)"},children:"Commandes"})]}),(0,r.jsxs)("article",{className:"card",style:{gap:"var(--space-1)"},children:[r.jsx("strong",{children:t.totalItemsSold}),r.jsx("span",{className:"muted",style:{fontSize:"var(--fs-small)"},children:"Unit\xe9s vendues"})]}),(0,r.jsxs)("article",{className:"card",style:{gap:"var(--space-1)"},children:[r.jsx("strong",{children:o(t.totalRevenueCents)}),r.jsx("span",{className:"muted",style:{fontSize:"var(--fs-small)"},children:"Chiffre d'affaires"})]}),(0,r.jsxs)("article",{className:"card",style:{gap:"var(--space-1)"},children:[r.jsx("strong",{children:o(t.averageOrderValueCents)}),r.jsx("span",{className:"muted",style:{fontSize:"var(--fs-small)"},children:"Panier moyen"})]}),(0,r.jsxs)("article",{className:"card",style:{gap:"var(--space-1)"},children:[(0,r.jsxs)("strong",{children:[(t.totalImpactCo2Grams/1e3).toFixed(1)," kg CO2e"]}),r.jsx("span",{className:"muted",style:{fontSize:"var(--fs-small)"},children:"Impact \xe9vit\xe9"})]})]}),(0,r.jsxs)("div",{className:"card",style:{gap:"var(--space-2)"},children:[r.jsx("strong",{children:"Top produits"}),0===t.topProducts.length?r.jsx("p",{className:"muted",children:"Aucun produit en t\xeate pour le moment."}):r.jsx("div",{className:"grid",style:{gap:"var(--space-1)"},children:t.topProducts.map(e=>(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[r.jsx("span",{children:e.title}),(0,r.jsxs)("span",{className:"muted",style:{fontSize:"var(--fs-small)"},children:[e.unitsSold," unit\xe9s â€¢ ",(e.revenueCents/100).toFixed(2)," EUR"]})]},e.productId))})]})]})]})})})}function c(){return r.jsx(n.Z,{requireAuth:!0,requiredRole:"producer",children:()=>r.jsx(l,{})})}},3584:(e,t,s)=>{"use strict";s.d(t,{J8:()=>n,et:()=>o,sJ:()=>i,ud:()=>l});var r=s(6824),a=s(9571);async function i(e,t={}){let s=await (0,r.S)("/producer/products",{authToken:e,params:{limit:t.limit??20,offset:t.offset??0}});return{items:s.items.map(a.fm),total:s.total,limit:s.limit,offset:s.offset}}async function n(e,t){let s={title:t.title,price_cents:t.priceCents,stock:t.stock,description:t.description??null,category:t.category??null,region:t.region??null,origin:t.origin??null,dlc_date:t.dlcDate??null,impact_co2_g:t.impactCo2Grams??null,promo_price_cents:t.promoPriceCents??null,is_published:t.isPublished??!1,images:(t.images??[]).map(e=>({url:e.url,is_primary:!!e.isPrimary}))};t.status&&(s.status=t.status);let i=await (0,r.S)("/products",{method:"POST",authToken:e,body:JSON.stringify(s)});return(0,a.fm)(i)}async function o(e,t,s){let i={};void 0!==s.title&&(i.title=s.title),void 0!==s.description&&(i.description=s.description),void 0!==s.category&&(i.category=s.category),void 0!==s.region&&(i.region=s.region),void 0!==s.origin&&(i.origin=s.origin),void 0!==s.dlcDate&&(i.dlc_date=s.dlcDate),void 0!==s.impactCo2Grams&&(i.impact_co2_g=s.impactCo2Grams),void 0!==s.priceCents&&(i.price_cents=s.priceCents),void 0!==s.promoPriceCents&&(i.promo_price_cents=s.promoPriceCents),void 0!==s.stock&&(i.stock=s.stock),void 0!==s.status&&(i.status=s.status),void 0!==s.isPublished&&(i.is_published=s.isPublished);let n=await (0,r.S)(`/producer/products/${t}`,{method:"PUT",authToken:e,body:JSON.stringify(i)});return(0,a.fm)(n)}async function l(e,t){await (0,r.S)(`/producer/products/${t}`,{method:"DELETE",authToken:e})}},9410:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n,metadata:()=>i});var r=s(9510);let a=(0,s(8570).createProxy)(String.raw`C:\New\Greencart\Greencart\components\ProducerDashboardPage.tsx#default`),i={title:"Dashboard producteur | GreenCart",description:"Suivez vos ventes et vos indicateurs cl\xe9s."};function n(){return r.jsx(a,{})}},7304:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a,metadata:()=>r});let r={title:"Espace producteurs | GreenCart",description:"Tableau de bord, produits et recommandations IA pour les producteurs GreenCart."};function a({children:e}){return e}}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[948,772,404,424,526,531],()=>s(8598));module.exports=r})();