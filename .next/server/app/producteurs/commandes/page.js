(()=>{var e={};e.id=498,e.ids=[498],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2864:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>c}),s(7799),s(7304),s(8242),s(5866);var r=s(3191),a=s(8716),n=s(7922),i=s.n(n),o=s(5231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let c=["",{children:["producteurs",{children:["commandes",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,7799)),"C:\\New\\Greencart\\Greencart\\app\\producteurs\\commandes\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,7304)),"C:\\New\\Greencart\\Greencart\\app\\producteurs\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,8242)),"C:\\New\\Greencart\\Greencart\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\New\\Greencart\\Greencart\\app\\producteurs\\commandes\\page.tsx"],u="/producteurs/commandes/page",p={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/producteurs/commandes/page",pathname:"/producteurs/commandes",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},2412:(e,t,s)=>{Promise.resolve().then(s.bind(s,7094))},5303:()=>{},7094:(e,t,s)=>{"use strict";s.d(t,{default:()=>u});var r=s(326),a=s(7577);s(3584);var n=s(2716),i=s(8358),o=s(2531);function l({height:e=80,width:t="100%"}){return r.jsx("div",{"aria-hidden":!0,style:{height:e,width:t,borderRadius:8,background:"linear-gradient(90deg, rgba(0,0,0,0.06) 25%, rgba(0,0,0,0.09) 37%, rgba(0,0,0,0.06) 63%)",backgroundSize:"400% 100%",animation:"gc-skeleton 1.4s ease infinite"}})}function c(e){return`${(e/100).toFixed(2)} EUR`}function d(){let{user:e}=(0,i.a)(),[t,s]=(0,a.useState)([]),[o,d]=(0,a.useState)(!1),[u,p]=(0,a.useState)(null),[m,g]=(0,a.useState)(1),[x]=(0,a.useState)(20),{showToast:h}=(0,n.p)(),[v,f]=(0,a.useState)(""),[y,j]=(0,a.useState)(""),[b,C]=(0,a.useState)(""),[_,w]=(0,a.useState)("date_desc"),P=(()=>{let e=v.trim().toLowerCase(),s=e?t.filter(t=>`${t.customerEmail} ${t.orderId}`.toLowerCase().includes(e)):t.slice();if(y){let e=new Date(y).getTime();s=s.filter(t=>new Date(t.createdAt).getTime()>=e)}if(b){let e=new Date(b).getTime();s=s.filter(t=>new Date(t.createdAt).getTime()<=e)}return s.sort((e,t)=>"total_desc"===_?t.totalAmountCents-e.totalAmountCents:new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()),s})();return r.jsx("main",{className:"container",style:{display:"grid",gap:"var(--space-12)"},children:r.jsx("section",{className:"section",children:(0,r.jsxs)("div",{style:{display:"grid",gap:"var(--space-3)"},children:[(0,r.jsxs)("div",{children:[r.jsx("div",{className:"badge badge--impact",children:"Espace producteur"}),r.jsx("h1",{style:{marginTop:"var(--space-2)"},children:"Commandes"}),r.jsx("p",{className:"muted",children:"Commandes contenant vos produits."})]}),u?r.jsx("div",{className:"alert alert--warning",children:u}):null,o?r.jsx("div",{className:"grid",style:{gap:"var(--space-3)"},children:Array.from({length:4}).map((e,t)=>r.jsx(l,{height:120},t))}):0===P.length?r.jsx("p",{className:"muted",children:"Aucune commande pour l'instant."}):r.jsx("div",{className:"grid",style:{gap:"var(--space-3)"},children:P.map(e=>(0,r.jsxs)("article",{className:"card",style:{gap:"var(--space-2)"},children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,r.jsxs)("strong",{children:["Commande #",e.orderId]}),r.jsx("span",{className:"muted",style:{fontSize:"var(--fs-small)"},children:new Date(e.createdAt).toLocaleString("fr-FR")})]}),(0,r.jsxs)("div",{className:"muted",style:{fontSize:"var(--fs-small)"},children:["Client: ",e.customerEmail," \xb7 Statut: ",e.status]}),r.jsx("div",{style:{display:"grid",gap:"var(--space-1)"},children:e.lines.map(e=>(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,r.jsxs)("span",{children:[e.productTitle," x",e.quantity]}),r.jsx("span",{children:c(e.subtotalCents)})]},e.id))}),(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",fontWeight:600},children:[r.jsx("span",{children:"Total"}),r.jsx("span",{children:c(e.totalAmountCents)})]})]},e.orderId))}),(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"12px",flexWrap:"wrap"},children:[(0,r.jsxs)("div",{style:{display:"flex",gap:"8px",alignItems:"center",flexWrap:"wrap"},children:[r.jsx("input",{className:"input",placeholder:"Rechercher (email, #id)",value:v,onChange:e=>f(e.target.value)}),(0,r.jsxs)("select",{className:"select",value:_,onChange:e=>w(e.target.value),children:[r.jsx("option",{value:"date_desc",children:"Plus r\xe9centes"}),r.jsx("option",{value:"total_desc",children:"Total d\xe9croissant"})]}),r.jsx("input",{className:"input",type:"date",value:y,onChange:e=>j(e.target.value)}),r.jsx("input",{className:"input",type:"date",value:b,onChange:e=>C(e.target.value)})]}),(0,r.jsxs)("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[r.jsx("button",{className:"btn btn--ghost",type:"button",disabled:m<=1,onClick:()=>g(e=>Math.max(1,e-1)),children:"Prec."}),r.jsx("button",{className:"btn btn--ghost",type:"button",onClick:()=>g(e=>e+1),children:"Suiv."})]}),r.jsx("button",{className:"btn",type:"button",onClick:()=>{if(0===P.length){h("Aucune commande \xe0 exporter","warning");return}let e=new Blob([["order_id,status,created_at,customer_email,line_count,total_cents",...P.map(e=>[e.orderId,e.status,e.createdAt,e.customerEmail,e.lines.length,e.totalAmountCents]).map(e=>e.join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),t=URL.createObjectURL(e),s=document.createElement("a");s.href=t,s.download="commandes_producteur.csv",s.click(),URL.revokeObjectURL(t)},children:"Exporter CSV"})]})]})})})}function u(){return r.jsx(o.Z,{requireAuth:!0,requiredRole:"producer",children:()=>r.jsx(d,{})})}},3584:(e,t,s)=>{"use strict";s.d(t,{J8:()=>i,et:()=>o,sJ:()=>n,ud:()=>l});var r=s(6824),a=s(9571);async function n(e,t={}){let s=await (0,r.S)("/producer/products",{authToken:e,params:{limit:t.limit??20,offset:t.offset??0}});return{items:s.items.map(a.fm),total:s.total,limit:s.limit,offset:s.offset}}async function i(e,t){let s={title:t.title,price_cents:t.priceCents,stock:t.stock,description:t.description??null,category:t.category??null,region:t.region??null,origin:t.origin??null,dlc_date:t.dlcDate??null,impact_co2_g:t.impactCo2Grams??null,promo_price_cents:t.promoPriceCents??null,is_published:t.isPublished??!1,images:(t.images??[]).map(e=>({url:e.url,is_primary:!!e.isPrimary}))};t.status&&(s.status=t.status);let n=await (0,r.S)("/products",{method:"POST",authToken:e,body:JSON.stringify(s)});return(0,a.fm)(n)}async function o(e,t,s){let n={};void 0!==s.title&&(n.title=s.title),void 0!==s.description&&(n.description=s.description),void 0!==s.category&&(n.category=s.category),void 0!==s.region&&(n.region=s.region),void 0!==s.origin&&(n.origin=s.origin),void 0!==s.dlcDate&&(n.dlc_date=s.dlcDate),void 0!==s.impactCo2Grams&&(n.impact_co2_g=s.impactCo2Grams),void 0!==s.priceCents&&(n.price_cents=s.priceCents),void 0!==s.promoPriceCents&&(n.promo_price_cents=s.promoPriceCents),void 0!==s.stock&&(n.stock=s.stock),void 0!==s.status&&(n.status=s.status),void 0!==s.isPublished&&(n.is_published=s.isPublished);let i=await (0,r.S)(`/producer/products/${t}`,{method:"PUT",authToken:e,body:JSON.stringify(n)});return(0,a.fm)(i)}async function l(e,t){await (0,r.S)(`/producer/products/${t}`,{method:"DELETE",authToken:e})}},7799:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i,metadata:()=>n});var r=s(9510);let a=(0,s(8570).createProxy)(String.raw`C:\New\Greencart\Greencart\components\ProducerOrdersPage.tsx#default`),n={title:"Commandes producteur | GreenCart",description:"Consultez les commandes li\xe9es \xe0 vos produits."};function i(){return r.jsx(a,{})}},7304:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a,metadata:()=>r});let r={title:"Espace producteurs | GreenCart",description:"Tableau de bord, produits et recommandations IA pour les producteurs GreenCart."};function a({children:e}){return e}}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[948,772,404,424,526,531],()=>s(2864));module.exports=r})();