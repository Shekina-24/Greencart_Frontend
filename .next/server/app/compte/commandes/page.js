(()=>{var e={};e.id=172,e.ids=[172],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3062:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>m,pages:()=>o,routeModule:()=>u,tree:()=>d}),t(490),t(8242),t(5866);var a=t(3191),r=t(8716),n=t(7922),i=t.n(n),l=t(5231),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);t.d(s,c);let d=["",{children:["compte",{children:["commandes",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,490)),"C:\\New\\Greencart\\Greencart\\app\\compte\\commandes\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,8242)),"C:\\New\\Greencart\\Greencart\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\New\\Greencart\\Greencart\\app\\compte\\commandes\\page.tsx"],m="/compte/commandes/page",p={require:t,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/compte/commandes/page",pathname:"/compte/commandes",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},3542:(e,s,t)=>{Promise.resolve().then(t.bind(t,8937))},8937:(e,s,t)=>{"use strict";t.d(s,{default:()=>m});var a=t(326),r=t(434),n=t(7577),i=t(8358),l=t(2531),c=t(8149);function d(e,s){return`${(e/100).toFixed(2)} ${s}`}function o({experience:e,successOrder:s}){let{user:t}=(0,i.a)();e.openAuthModal;let{orders:l,isLoading:o,error:m}=(0,c.Y)(!!t),p=(0,n.useMemo)(()=>m&&"missing-token"!==m.message?(console.error("[OrdersPage] Failed to load orders",m),"Impossible de recuperer vos commandes."):null,[m]);return(0,a.jsxs)("main",{className:"container",style:{display:"grid",gap:"var(--space-12)"},children:[(0,a.jsxs)("nav",{"aria-label":"Fil d'ariane",style:{fontSize:"var(--fs-small)"},children:[a.jsx(r.default,{className:"muted",href:"/catalogue",children:"Catalogue"})," / Mes commandes"]}),a.jsx("section",{className:"section",children:(0,a.jsxs)("div",{style:{display:"grid",gap:"var(--space-3)"},children:[(0,a.jsxs)("div",{children:[a.jsx("div",{className:"badge badge--impact",children:"Historique"}),a.jsx("h1",{style:{marginTop:"var(--space-2)"},children:"Mes commandes"}),a.jsx("p",{className:"muted",children:"Suivez vos commandes passees et leur impact carbone evite."})]}),s?(0,a.jsxs)("div",{className:"alert alert--success",role:"status",children:["Commande #",s," confirmï¿½e. Merci pour votre achat !"]}):null,p?a.jsx("div",{className:"alert alert--warning",children:p}):null,o?a.jsx("p",{className:"muted",children:"Chargement des commandes..."}):0===l.length?a.jsx("p",{className:"muted",children:"Vous n'avez pas encore passe de commande."}):a.jsx("div",{className:"grid",style:{gap:"var(--space-3)"},children:l.map(e=>(0,a.jsxs)("article",{className:"card",style:{gap:"var(--space-2)"},children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",gap:"var(--space-2)"},children:[(0,a.jsxs)("strong",{children:["Commande #",e.id]}),a.jsx("span",{className:"muted",children:new Date(e.createdAt).toLocaleString("fr-FR")})]}),(0,a.jsxs)("div",{className:"muted",style:{fontSize:"var(--fs-small)",display:"flex",gap:"8px",alignItems:"center"},children:[a.jsx("span",{className:`badge ${"paid"===e.status?"badge--impact":"cancelled"===e.status?"badge--secondary":"refunded"===e.status?"badge--secondary":""}`,children:e.status}),(0,a.jsxs)("span",{children:[e.totalItems," article",e.totalItems>1?"s":""]})]}),a.jsx("div",{style:{display:"grid",gap:"var(--space-1)"},children:e.lines.map(s=>(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[a.jsx("span",{children:s.productTitle}),a.jsx("span",{children:d(s.subtotalCents,e.currency)})]},s.id))}),(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",fontWeight:600},children:[a.jsx("span",{children:"Total"}),a.jsx("span",{children:d(e.totalAmountCents,e.currency)})]}),(0,a.jsxs)("div",{className:"muted",style:{fontSize:"var(--fs-small)"},children:["Impact carbone evite : ",(e.totalImpactCo2Grams/1e3).toFixed(1)," kg CO2e"]})]},e.id))})]})})]})}function m({successOrder:e=null}={}){return a.jsx(l.Z,{requireAuth:!0,children:s=>a.jsx(o,{experience:s,successOrder:e})})}},8149:(e,s,t)=>{"use strict";t.d(s,{Y:()=>l});var a=t(7577),r=t(8399),n=t(3391),i=t(2924);function l(e){let s=(0,a.useMemo)(()=>{if(!e)return null;let s=(0,n.Z6)();return s?["orders",s.accessToken]:"orders-missing-token"},[e]),{data:t,error:l,isLoading:c,mutate:d}=(0,r.ZP)(s,async()=>{let e=(0,n.Z6)();if(!e)throw Error("missing-token");return(await (0,i.AU)(e.accessToken)).items},{revalidateOnFocus:!1,shouldRetryOnError:e=>"missing-token"!==e.message});return{orders:t??[],isLoading:c,error:l,mutate:d}}},490:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>i,metadata:()=>n});var a=t(9510);let r=(0,t(8570).createProxy)(String.raw`C:\New\Greencart\Greencart\components\OrdersPage.tsx#default`),n={title:"Mes commandes | GreenCart",description:"Consultez l'''historique de vos commandes GreenCart et mesurez l'''impact carbone evite."};function i({searchParams:e}){let s="string"==typeof e?.order?e.order:null;return a.jsx(r,{successOrder:s})}}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[948,772,404,424,399,526,531],()=>t(3062));module.exports=a})();