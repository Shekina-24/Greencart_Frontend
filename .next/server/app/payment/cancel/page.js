(()=>{var e={};e.id=359,e.ids=[359],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9173:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>d,pages:()=>u,routeModule:()=>m,tree:()=>c}),r(9974),r(8242),r(5866);var n=r(3191),a=r(8716),s=r(7922),i=r.n(s),o=r(5231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let c=["",{children:["payment",{children:["cancel",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,9974)),"C:\\New\\Greencart\\Greencart\\app\\payment\\cancel\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,8242)),"C:\\New\\Greencart\\Greencart\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],u=["C:\\New\\Greencart\\Greencart\\app\\payment\\cancel\\page.tsx"],d="/payment/cancel/page",p={require:r,loadChunk:()=>Promise.resolve()},m=new n.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/payment/cancel/page",pathname:"/payment/cancel",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},1886:(e,t,r)=>{Promise.resolve().then(r.bind(r,9045))},8474:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2994,23)),Promise.resolve().then(r.t.bind(r,6114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,9671,23)),Promise.resolve().then(r.t.bind(r,1868,23)),Promise.resolve().then(r.t.bind(r,4759,23))},340:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,9404,23))},9045:(e,t,r)=>{"use strict";r.d(t,{default:()=>c});var n=r(326),a=r(8358),s=r(2716),i=r(7577);function o(){let[e,t]=(0,i.useState)(()=>!1);return(0,i.useRef)(!1),null}function l(){let[e,t]=(0,i.useState)(!1),r=(0,i.useCallback)(e=>{t(!1)},[]);return e?n.jsx("div",{role:"dialog","aria-live":"polite",className:"card",style:{position:"fixed",bottom:16,left:16,right:16,maxWidth:720,margin:"0 auto",zIndex:1e3},children:(0,n.jsxs)("div",{style:{display:"grid",gap:"8px"},children:[n.jsx("strong",{children:"Cookies d'analyse (GTM/GA)"}),n.jsx("p",{className:"muted",style:{margin:0},children:"Nous utilisons des cookies d'analyse pour comprendre l'usage et am\xe9liorer GreenCart. Vous pouvez accepter ou refuser."}),(0,n.jsxs)("div",{style:{display:"flex",gap:"8px",justifyContent:"flex-end",flexWrap:"wrap"},children:[n.jsx("button",{className:"btn",type:"button",onClick:()=>r("denied"),children:"Refuser"}),n.jsx("button",{className:"btn btn--primary",type:"button",onClick:()=>r("granted"),children:"Accepter"})]})]})}):null}function c({children:e}){return n.jsx(a.H,{children:(0,n.jsxs)(s.V,{children:[n.jsx(o,{}),n.jsx(l,{}),e]})})}},2716:(e,t,r)=>{"use strict";r.d(t,{V:()=>i,p:()=>o});var n=r(326),a=r(7577);let s=(0,a.createContext)(void 0);function i({children:e}){let[t,r]=(0,a.useState)([]),i=(0,a.useCallback)((e,t="info",n=3e3)=>{let a=`${Date.now()}-${Math.random()}`;r(r=>[...r,{id:a,message:e,type:t,timeoutMs:n}]),window.setTimeout(()=>{r(e=>e.filter(e=>e.id!==a))},n)},[]),o=(0,a.useMemo)(()=>({showToast:i}),[i]);return(0,n.jsxs)(s.Provider,{value:o,children:[e,n.jsx("div",{style:{position:"fixed",right:16,bottom:16,display:"grid",gap:"8px",zIndex:1e3},"aria-live":"polite","aria-atomic":!0,children:t.map(e=>n.jsx("div",{className:`alert ${"success"===e.type?"alert--success":"warning"===e.type?"alert--warning":"error"===e.type?"alert--warning":""}`,role:"status",children:e.message},e.id))})]})}function o(){let e=(0,a.useContext)(s);if(!e)throw Error("useToast must be used within ToastProvider");return e}},8358:(e,t,r)=>{"use strict";r.d(t,{H:()=>h,a:()=>f});var n=r(326),a=r(7577),s=r(5047),i=r(3391),o=r(6824);async function l(e){let t=await (0,o.S)("/auth/login",{method:"POST",body:JSON.stringify(e)});return(0,i.XC)({accessToken:t.access_token,refreshToken:t.refresh_token}),{user:await d(t.access_token),tokens:{accessToken:t.access_token,refreshToken:t.refresh_token}}}async function c(e){let t={email:e.email,password:e.password,role:e.role??"consumer",first_name:e.firstName,last_name:e.lastName,region:e.region,consent_newsletter:e.consentNewsletter??!1,consent_analytics:e.consentAnalytics??!1};return p(await (0,o.S)("/auth/register",{method:"POST",body:JSON.stringify(t)}))}async function u(e){let t=await (0,o.S)("/auth/refresh",{method:"POST",body:JSON.stringify({refresh_token:e})});return(0,i.XC)({accessToken:t.access_token,refreshToken:t.refresh_token}),{accessToken:t.access_token,refreshToken:t.refresh_token}}async function d(e){return p(await (0,o.S)("/auth/me",{authToken:e}))}function p(e){return{id:e.id,email:e.email,role:e.role,firstName:e.first_name,lastName:e.last_name,region:e.region,isActive:e.is_active,emailVerifiedAt:e.email_verified_at,lastLoginAt:e.last_login_at,consentNewsletter:e.consent_newsletter,consentAnalytics:e.consent_analytics,createdAt:e.created_at,updatedAt:e.updated_at}}let m=(0,a.createContext)(void 0);function h({children:e}){let[t,r]=(0,a.useState)(null),[o,u]=(0,a.useState)(!0),d=(0,s.useRouter)(),p=(0,a.useCallback)(async e=>{try{let t=await l(e);return r(t.user),{success:!0}}catch(e){return{success:!1,error:g(e)}}},[]),h=(0,a.useCallback)(async e=>{try{await c(e);let t=await p({email:e.email,password:e.password});if(!t.success)return t;return{success:!0}}catch(e){return{success:!1,error:g(e)}}},[p]),f=(0,a.useCallback)(()=>{(0,i.ZP)(),r(null);try{d.push("/landing")}catch{}},[d]),x=(0,a.useCallback)(async()=>{let e=(0,i.Z6)();if(e)try{let t=await y(e);r(t)}catch{}},[]),v=(0,a.useMemo)(()=>({user:t,isAuthenticating:o,login:p,register:h,logout:f,reloadUser:x}),[t,o,p,h,f,x]);return n.jsx(m.Provider,{value:v,children:e})}function f(){let e=(0,a.useContext)(m);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}async function y(e){try{return await d(e.accessToken)}catch(t){return d((await u(e.refreshToken)).accessToken)}}function g(e){if(e&&"object"==typeof e&&"payload"in e){let t=e.payload;if("string"==typeof t)return t;if(t&&"object"==typeof t&&"detail"in t){let e=t.detail;if("string"==typeof e)return e;if(Array.isArray(e)&&e.length>0)return String(e[0])}}return e instanceof Error?e.message:"Une erreur est survenue. Merci de reessayer."}},6824:(e,t,r)=>{"use strict";r.d(t,{S:()=>a,r:()=>i});let n="http://localhost:8000".replace(/\/+$/,"");async function a(e,t={}){let{params:r,authToken:a,headers:i,next:o,cache:l,...c}=t,u=function(e,t){let r=new URL(`/api/v1${e}`,n);return t&&Object.entries(t).filter(([,e])=>null!=e&&""!==e).forEach(([e,t])=>r.searchParams.set(e,String(t))),r}(e,r),d=(c.method??"GET").toString().toUpperCase(),p="GET"===d,m=o??(!a&&p?{revalidate:300}:void 0),h=await fetch(u,{...c,method:d,headers:{"Content-Type":"application/json",...a?{Authorization:`Bearer ${a}`}:{},...i??{}},cache:l??(a||!p?"no-store":void 0),...m?{next:m}:{}});if(!h.ok){let e=await s(h),t=Error(`API request failed with ${h.status} ${h.statusText}`);throw t.status=h.status,t.payload=e,t}return await s(h)}async function s(e){let t=await e.text();if(!t)return null;try{return JSON.parse(t)}catch{return t}}function i(){return n}},3391:(e,t,r)=>{"use strict";function n(e){}function a(){return null}function s(){}r.d(t,{XC:()=>n,Z6:()=>a,ZP:()=>s})},8242:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o,metadata:()=>i});var n=r(9510);let a=(0,r(8570).createProxy)(String.raw`C:\New\Greencart\Greencart\components\Providers.tsx#default`);r(7272);let s="GreenCart connecte consommateurs et producteurs pour valoriser les invendus, reduire le gaspillage alimentaire et suivre l'impact carbone des achats.",i={title:{default:"GreenCart | Anti-gaspi, local & bas carbone",template:"%s | GreenCart"},description:s,alternates:{canonical:"/"},openGraph:{title:"GreenCart | Anti-gaspi, local & bas carbone",description:s,type:"website",url:"/"},twitter:{card:"summary_large_image",title:"GreenCart | Anti-gaspi, local & bas carbone",description:s}};function o({children:e}){return n.jsx("html",{lang:"fr",children:n.jsx("body",{children:n.jsx(a,{children:e})})})}},9974:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i,metadata:()=>s});var n=r(9510),a=r(7371);let s={title:"Paiement annul\xe9 | GreenCart",description:"Votre session de paiement a \xe9t\xe9 annul\xe9e."};function i({searchParams:e}){let t="string"==typeof e?.order?e.order:null;return n.jsx("main",{className:"container",style:{display:"grid",gap:"var(--space-8)",padding:"var(--space-10) 0"},children:(0,n.jsxs)("section",{className:"section",style:{textAlign:"center"},children:[n.jsx("div",{className:"badge badge--secondary",children:"Paiement annul\xe9"}),n.jsx("h1",{style:{marginTop:"var(--space-2)"},children:"Paiement annul\xe9"}),n.jsx("p",{className:"muted",children:"Vous pouvez r\xe9essayer le paiement ou revenir au catalogue."}),(0,n.jsxs)("div",{style:{display:"flex",gap:"var(--space-2)",justifyContent:"center",marginTop:"var(--space-4)"},children:[n.jsx(a.default,{className:"btn btn--primary",href:"/checkout",children:"R\xe9essayer"}),n.jsx(a.default,{className:"btn btn--ghost",href:"/catalogue",children:"Retour au catalogue"}),t?(0,n.jsxs)(a.default,{className:"btn btn--ghost",href:`/compte/commandes?order=${t}`,children:["Voir commande #",t]}):null]})]})})}},7371:(e,t,r)=>{"use strict";r.d(t,{default:()=>a.a});var n=r(1812),a=r.n(n)},1812:(e,t,r)=>{"use strict";let{createProxy:n}=r(8570);e.exports=n("C:\\New\\Greencart\\Greencart\\node_modules\\next\\dist\\client\\link.js")},7272:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[948,772,404],()=>r(9173));module.exports=n})();