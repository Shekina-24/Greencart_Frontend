(()=>{var e={};e.id=409,e.ids=[409],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6463:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>f,originalPathname:()=>d,pages:()=>c,routeModule:()=>p,tree:()=>u}),r(7352),r(5866),r(8242);var n=r(3191),s=r(8716),a=r(7922),i=r.n(a),o=r(5231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let u=["",{children:["/_not-found",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,8242)),"C:\\New\\Greencart\\Greencart\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],c=[],d="/_not-found/page",f={require:r,loadChunk:()=>Promise.resolve()},p=new n.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/_not-found/page",pathname:"/_not-found",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},1886:(e,t,r)=>{Promise.resolve().then(r.bind(r,9045))},8474:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2994,23)),Promise.resolve().then(r.t.bind(r,6114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,9671,23)),Promise.resolve().then(r.t.bind(r,1868,23)),Promise.resolve().then(r.t.bind(r,4759,23))},9045:(e,t,r)=>{"use strict";r.d(t,{default:()=>u});var n=r(326),s=r(8358),a=r(2716),i=r(7577);function o(){let[e,t]=(0,i.useState)(()=>!1);return(0,i.useRef)(!1),null}function l(){let[e,t]=(0,i.useState)(!1),r=(0,i.useCallback)(e=>{t(!1)},[]);return e?n.jsx("div",{role:"dialog","aria-live":"polite",className:"card",style:{position:"fixed",bottom:16,left:16,right:16,maxWidth:720,margin:"0 auto",zIndex:1e3},children:(0,n.jsxs)("div",{style:{display:"grid",gap:"8px"},children:[n.jsx("strong",{children:"Cookies d'analyse (GTM/GA)"}),n.jsx("p",{className:"muted",style:{margin:0},children:"Nous utilisons des cookies d'analyse pour comprendre l'usage et am\xe9liorer GreenCart. Vous pouvez accepter ou refuser."}),(0,n.jsxs)("div",{style:{display:"flex",gap:"8px",justifyContent:"flex-end",flexWrap:"wrap"},children:[n.jsx("button",{className:"btn",type:"button",onClick:()=>r("denied"),children:"Refuser"}),n.jsx("button",{className:"btn btn--primary",type:"button",onClick:()=>r("granted"),children:"Accepter"})]})]})}):null}function u({children:e}){return n.jsx(s.H,{children:(0,n.jsxs)(a.V,{children:[n.jsx(o,{}),n.jsx(l,{}),e]})})}},2716:(e,t,r)=>{"use strict";r.d(t,{V:()=>i,p:()=>o});var n=r(326),s=r(7577);let a=(0,s.createContext)(void 0);function i({children:e}){let[t,r]=(0,s.useState)([]),i=(0,s.useCallback)((e,t="info",n=3e3)=>{let s=`${Date.now()}-${Math.random()}`;r(r=>[...r,{id:s,message:e,type:t,timeoutMs:n}]),window.setTimeout(()=>{r(e=>e.filter(e=>e.id!==s))},n)},[]),o=(0,s.useMemo)(()=>({showToast:i}),[i]);return(0,n.jsxs)(a.Provider,{value:o,children:[e,n.jsx("div",{style:{position:"fixed",right:16,bottom:16,display:"grid",gap:"8px",zIndex:1e3},"aria-live":"polite","aria-atomic":!0,children:t.map(e=>n.jsx("div",{className:`alert ${"success"===e.type?"alert--success":"warning"===e.type?"alert--warning":"error"===e.type?"alert--warning":""}`,role:"status",children:e.message},e.id))})]})}function o(){let e=(0,s.useContext)(a);if(!e)throw Error("useToast must be used within ToastProvider");return e}},8358:(e,t,r)=>{"use strict";r.d(t,{H:()=>h,a:()=>m});var n=r(326),s=r(7577),a=r(5047),i=r(3391),o=r(6824);async function l(e){let t=await (0,o.S)("/auth/login",{method:"POST",body:JSON.stringify(e)});return(0,i.XC)({accessToken:t.access_token,refreshToken:t.refresh_token}),{user:await d(t.access_token),tokens:{accessToken:t.access_token,refreshToken:t.refresh_token}}}async function u(e){let t={email:e.email,password:e.password,role:e.role??"consumer",first_name:e.firstName,last_name:e.lastName,region:e.region,consent_newsletter:e.consentNewsletter??!1,consent_analytics:e.consentAnalytics??!1};return f(await (0,o.S)("/auth/register",{method:"POST",body:JSON.stringify(t)}))}async function c(e){let t=await (0,o.S)("/auth/refresh",{method:"POST",body:JSON.stringify({refresh_token:e})});return(0,i.XC)({accessToken:t.access_token,refreshToken:t.refresh_token}),{accessToken:t.access_token,refreshToken:t.refresh_token}}async function d(e){return f(await (0,o.S)("/auth/me",{authToken:e}))}function f(e){return{id:e.id,email:e.email,role:e.role,firstName:e.first_name,lastName:e.last_name,region:e.region,isActive:e.is_active,emailVerifiedAt:e.email_verified_at,lastLoginAt:e.last_login_at,consentNewsletter:e.consent_newsletter,consentAnalytics:e.consent_analytics,createdAt:e.created_at,updatedAt:e.updated_at}}let p=(0,s.createContext)(void 0);function h({children:e}){let[t,r]=(0,s.useState)(null),[o,c]=(0,s.useState)(!0),d=(0,a.useRouter)(),f=(0,s.useCallback)(async e=>{try{let t=await l(e);return r(t.user),{success:!0}}catch(e){return{success:!1,error:g(e)}}},[]),h=(0,s.useCallback)(async e=>{try{await u(e);let t=await f({email:e.email,password:e.password});if(!t.success)return t;return{success:!0}}catch(e){return{success:!1,error:g(e)}}},[f]),m=(0,s.useCallback)(()=>{(0,i.ZP)(),r(null);try{d.push("/landing")}catch{}},[d]),_=(0,s.useCallback)(async()=>{let e=(0,i.Z6)();if(e)try{let t=await y(e);r(t)}catch{}},[]),x=(0,s.useMemo)(()=>({user:t,isAuthenticating:o,login:f,register:h,logout:m,reloadUser:_}),[t,o,f,h,m,_]);return n.jsx(p.Provider,{value:x,children:e})}function m(){let e=(0,s.useContext)(p);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}async function y(e){try{return await d(e.accessToken)}catch(t){return d((await c(e.refreshToken)).accessToken)}}function g(e){if(e&&"object"==typeof e&&"payload"in e){let t=e.payload;if("string"==typeof t)return t;if(t&&"object"==typeof t&&"detail"in t){let e=t.detail;if("string"==typeof e)return e;if(Array.isArray(e)&&e.length>0)return String(e[0])}}return e instanceof Error?e.message:"Une erreur est survenue. Merci de reessayer."}},6824:(e,t,r)=>{"use strict";r.d(t,{S:()=>s,r:()=>i});let n="http://localhost:8000".replace(/\/+$/,"");async function s(e,t={}){let{params:r,authToken:s,headers:i,next:o,cache:l,...u}=t,c=function(e,t){let r=new URL(`/api/v1${e}`,n);return t&&Object.entries(t).filter(([,e])=>null!=e&&""!==e).forEach(([e,t])=>r.searchParams.set(e,String(t))),r}(e,r),d=(u.method??"GET").toString().toUpperCase(),f="GET"===d,p=o??(!s&&f?{revalidate:300}:void 0),h=await fetch(c,{...u,method:d,headers:{"Content-Type":"application/json",...s?{Authorization:`Bearer ${s}`}:{},...i??{}},cache:l??(s||!f?"no-store":void 0),...p?{next:p}:{}});if(!h.ok){let e=await a(h),t=Error(`API request failed with ${h.status} ${h.statusText}`);throw t.status=h.status,t.payload=e,t}return await a(h)}async function a(e){let t=await e.text();if(!t)return null;try{return JSON.parse(t)}catch{return t}}function i(){return n}},3391:(e,t,r)=>{"use strict";function n(e){}function s(){return null}function a(){}r.d(t,{XC:()=>n,Z6:()=>s,ZP:()=>a})},8242:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o,metadata:()=>i});var n=r(9510);let s=(0,r(8570).createProxy)(String.raw`C:\New\Greencart\Greencart\components\Providers.tsx#default`);r(7272);let a="GreenCart connecte consommateurs et producteurs pour valoriser les invendus, reduire le gaspillage alimentaire et suivre l'impact carbone des achats.",i={title:{default:"GreenCart | Anti-gaspi, local & bas carbone",template:"%s | GreenCart"},description:a,alternates:{canonical:"/"},openGraph:{title:"GreenCart | Anti-gaspi, local & bas carbone",description:a,type:"website",url:"/"},twitter:{card:"summary_large_image",title:"GreenCart | Anti-gaspi, local & bas carbone",description:a}};function o({children:e}){return n.jsx("html",{lang:"fr",children:n.jsx("body",{children:n.jsx(s,{children:e})})})}},6399:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{isNotFoundError:function(){return s},notFound:function(){return n}});let r="NEXT_NOT_FOUND";function n(){let e=Error(r);throw e.digest=r,e}function s(e){return"object"==typeof e&&null!==e&&"digest"in e&&e.digest===r}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},7352:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{PARALLEL_ROUTE_DEFAULT_PATH:function(){return s},default:function(){return a}});let n=r(6399),s="next/dist/client/components/parallel-route-default.js";function a(){(0,n.notFound)()}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},7272:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[948,772],()=>r(6463));module.exports=n})();