exports.id=526,exports.ids=[526],exports.modules={1886:(e,t,r)=>{Promise.resolve().then(r.bind(r,9045))},8474:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2994,23)),Promise.resolve().then(r.t.bind(r,6114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,9671,23)),Promise.resolve().then(r.t.bind(r,1868,23)),Promise.resolve().then(r.t.bind(r,4759,23))},9045:(e,t,r)=>{"use strict";r.d(t,{default:()=>l});var n=r(326),a=r(8358),s=r(2716),i=r(7577);function o(){let[e,t]=(0,i.useState)(()=>!1);return(0,i.useRef)(!1),null}function c(){let[e,t]=(0,i.useState)(!1),r=(0,i.useCallback)(e=>{t(!1)},[]);return e?n.jsx("div",{role:"dialog","aria-live":"polite",className:"card",style:{position:"fixed",bottom:16,left:16,right:16,maxWidth:720,margin:"0 auto",zIndex:1e3},children:(0,n.jsxs)("div",{style:{display:"grid",gap:"8px"},children:[n.jsx("strong",{children:"Cookies d'analyse (GTM/GA)"}),n.jsx("p",{className:"muted",style:{margin:0},children:"Nous utilisons des cookies d'analyse pour comprendre l'usage et am\xe9liorer GreenCart. Vous pouvez accepter ou refuser."}),(0,n.jsxs)("div",{style:{display:"flex",gap:"8px",justifyContent:"flex-end",flexWrap:"wrap"},children:[n.jsx("button",{className:"btn",type:"button",onClick:()=>r("denied"),children:"Refuser"}),n.jsx("button",{className:"btn btn--primary",type:"button",onClick:()=>r("granted"),children:"Accepter"})]})]})}):null}function l({children:e}){return n.jsx(a.H,{children:(0,n.jsxs)(s.V,{children:[n.jsx(o,{}),n.jsx(c,{}),e]})})}},2716:(e,t,r)=>{"use strict";r.d(t,{V:()=>i,p:()=>o});var n=r(326),a=r(7577);let s=(0,a.createContext)(void 0);function i({children:e}){let[t,r]=(0,a.useState)([]),i=(0,a.useCallback)((e,t="info",n=3e3)=>{let a=`${Date.now()}-${Math.random()}`;r(r=>[...r,{id:a,message:e,type:t,timeoutMs:n}]),window.setTimeout(()=>{r(e=>e.filter(e=>e.id!==a))},n)},[]),o=(0,a.useMemo)(()=>({showToast:i}),[i]);return(0,n.jsxs)(s.Provider,{value:o,children:[e,n.jsx("div",{style:{position:"fixed",right:16,bottom:16,display:"grid",gap:"8px",zIndex:1e3},"aria-live":"polite","aria-atomic":!0,children:t.map(e=>n.jsx("div",{className:`alert ${"success"===e.type?"alert--success":"warning"===e.type?"alert--warning":"error"===e.type?"alert--warning":""}`,role:"status",children:e.message},e.id))})]})}function o(){let e=(0,a.useContext)(s);if(!e)throw Error("useToast must be used within ToastProvider");return e}},8358:(e,t,r)=>{"use strict";r.d(t,{H:()=>f,a:()=>y});var n=r(326),a=r(7577),s=r(5047),i=r(3391),o=r(6824);async function c(e){let t=await (0,o.S)("/auth/login",{method:"POST",body:JSON.stringify(e)});return(0,i.XC)({accessToken:t.access_token,refreshToken:t.refresh_token}),{user:await d(t.access_token),tokens:{accessToken:t.access_token,refreshToken:t.refresh_token}}}async function l(e){let t={email:e.email,password:e.password,role:e.role??"consumer",first_name:e.firstName,last_name:e.lastName,region:e.region,consent_newsletter:e.consentNewsletter??!1,consent_analytics:e.consentAnalytics??!1};return m(await (0,o.S)("/auth/register",{method:"POST",body:JSON.stringify(t)}))}async function u(e){let t=await (0,o.S)("/auth/refresh",{method:"POST",body:JSON.stringify({refresh_token:e})});return(0,i.XC)({accessToken:t.access_token,refreshToken:t.refresh_token}),{accessToken:t.access_token,refreshToken:t.refresh_token}}async function d(e){return m(await (0,o.S)("/auth/me",{authToken:e}))}function m(e){return{id:e.id,email:e.email,role:e.role,firstName:e.first_name,lastName:e.last_name,region:e.region,isActive:e.is_active,emailVerifiedAt:e.email_verified_at,lastLoginAt:e.last_login_at,consentNewsletter:e.consent_newsletter,consentAnalytics:e.consent_analytics,createdAt:e.created_at,updatedAt:e.updated_at}}let p=(0,a.createContext)(void 0);function f({children:e}){let[t,r]=(0,a.useState)(null),[o,u]=(0,a.useState)(!0),d=(0,s.useRouter)(),m=(0,a.useCallback)(async e=>{try{let t=await c(e);return r(t.user),{success:!0}}catch(e){return{success:!1,error:_(e)}}},[]),f=(0,a.useCallback)(async e=>{try{await l(e);let t=await m({email:e.email,password:e.password});if(!t.success)return t;return{success:!0}}catch(e){return{success:!1,error:_(e)}}},[m]),y=(0,a.useCallback)(()=>{(0,i.ZP)(),r(null);try{d.push("/landing")}catch{}},[d]),g=(0,a.useCallback)(async()=>{let e=(0,i.Z6)();if(e)try{let t=await h(e);r(t)}catch{}},[]),b=(0,a.useMemo)(()=>({user:t,isAuthenticating:o,login:m,register:f,logout:y,reloadUser:g}),[t,o,m,f,y,g]);return n.jsx(p.Provider,{value:b,children:e})}function y(){let e=(0,a.useContext)(p);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}async function h(e){try{return await d(e.accessToken)}catch(t){return d((await u(e.refreshToken)).accessToken)}}function _(e){if(e&&"object"==typeof e&&"payload"in e){let t=e.payload;if("string"==typeof t)return t;if(t&&"object"==typeof t&&"detail"in t){let e=t.detail;if("string"==typeof e)return e;if(Array.isArray(e)&&e.length>0)return String(e[0])}}return e instanceof Error?e.message:"Une erreur est survenue. Merci de reessayer."}},710:(e,t,r)=>{"use strict";function n(e){return"number"!=typeof e||Number.isNaN(e)?null:e/100}function a(e){e.id,e.name,e.quantity,e.priceCents;let t=n(e.priceCents??null);null!==t&&e.quantity,e.id,e.name,e.quantity}function s(e){e.totalCents,e.items.reduce((e,t)=>e+t.quantity,0),e.items,n(e.totalCents),e.items.map(e=>{let t=n(e.priceCents??null),r={item_id:e.id,item_name:String(e.id),quantity:e.quantity};return null!==t&&(r.price=t),r})}function i(e){e.orderId,e.currency,e.totalCents,n(e.totalCents),e.currency,e.orderId}r.d(t,{Kc:()=>a,Z_:()=>s,trackPurchase:()=>i}),new URL("/api/v1/analytics/events",(0,r(6824).r)()).toString()},6824:(e,t,r)=>{"use strict";r.d(t,{S:()=>a,r:()=>i});let n="http://localhost:8000".replace(/\/+$/,"");async function a(e,t={}){let{params:r,authToken:a,headers:i,next:o,cache:c,...l}=t,u=function(e,t){let r=new URL(`/api/v1${e}`,n);return t&&Object.entries(t).filter(([,e])=>null!=e&&""!==e).forEach(([e,t])=>r.searchParams.set(e,String(t))),r}(e,r),d=(l.method??"GET").toString().toUpperCase(),m="GET"===d,p=o??(!a&&m?{revalidate:300}:void 0),f=await fetch(u,{...l,method:d,headers:{"Content-Type":"application/json",...a?{Authorization:`Bearer ${a}`}:{},...i??{}},cache:c??(a||!m?"no-store":void 0),...p?{next:p}:{}});if(!f.ok){let e=await s(f),t=Error(`API request failed with ${f.status} ${f.statusText}`);throw t.status=f.status,t.payload=e,t}return await s(f)}async function s(e){let t=await e.text();if(!t)return null;try{return JSON.parse(t)}catch{return t}}function i(){return n}},3391:(e,t,r)=>{"use strict";function n(e){}function a(){return null}function s(){}r.d(t,{XC:()=>n,Z6:()=>a,ZP:()=>s})},2924:(e,t,r)=>{"use strict";r.d(t,{AU:()=>s,LV:()=>a});var n=r(6824);async function a(e,t,r){return i(await (0,n.S)("/orders",{method:"POST",authToken:e,body:JSON.stringify(t),headers:{"Idempotency-Key":r}}))}async function s(e,t={}){let r=await (0,n.S)("/orders",{authToken:e,params:{limit:t.limit??20,offset:t.offset??0}});return{items:r.items.map(i),total:r.total,limit:r.limit,offset:r.offset}}function i(e){return{id:e.id,status:e.status,currency:e.currency,totalAmountCents:e.total_amount_cents,totalItems:e.total_items,totalImpactCo2Grams:e.total_impact_co2_g,paymentReference:e.payment_reference,paymentProvider:e.payment_provider,idempotencyKey:e.idempotency_key,placedAt:e.placed_at,notes:e.notes,createdAt:e.created_at,updatedAt:e.updated_at,lines:e.lines.map(o)}}function o(e){return{id:e.id,productId:e.product_id,productTitle:e.product_title,quantity:e.quantity,unitPriceCents:e.unit_price_cents,referencePriceCents:e.reference_price_cents??null,subtotalCents:e.subtotal_cents,impactCo2Grams:e.impact_co2_g,createdAt:e.created_at,updatedAt:e.updated_at}}},8242:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o,metadata:()=>i});var n=r(9510);let a=(0,r(8570).createProxy)(String.raw`C:\New\Greencart\Greencart\components\Providers.tsx#default`);r(7272);let s="GreenCart connecte consommateurs et producteurs pour valoriser les invendus, reduire le gaspillage alimentaire et suivre l'impact carbone des achats.",i={title:{default:"GreenCart | Anti-gaspi, local & bas carbone",template:"%s | GreenCart"},description:s,alternates:{canonical:"/"},openGraph:{title:"GreenCart | Anti-gaspi, local & bas carbone",description:s,type:"website",url:"/"},twitter:{card:"summary_large_image",title:"GreenCart | Anti-gaspi, local & bas carbone",description:s}};function o({children:e}){return n.jsx("html",{lang:"fr",children:n.jsx("body",{children:n.jsx(a,{children:e})})})}},7272:()=>{}};